<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="account_internal_consumption.InternalConsumptionLimitDialog">
        <Dialog title="props.title || 'Límite Excedido'">
            <div class="internal-consumption-limit-dialog-body">
                <p class="text-center mb-3 text-warning fw-bold">
                    <i class="fa fa-exclamation-triangle me-2"/>
                    La operación excede el límite disponible.
                </p>

                <div class="limit-details-table" style="font-size: 0.9rem; border: 1px solid #dee2e6; border-radius: 4px; overflow: hidden;">
                    <!-- Header Row -->
                    <div class="d-flex justify-content-between p-2 bg-light border-bottom fw-bold">
                        <span>Concepto</span>
                        <span>Monto</span>
                    </div>

                    <!-- Rows -->
                    <div class="d-flex justify-content-between p-2 border-bottom">
                        <span class="text-muted">Límite Configurado:</span>
                        <span class="fw-bold"><t t-esc="env.utils.formatCurrency(props.data.consumption_limit)"/></span>
                    </div>
                    <div class="d-flex justify-content-between p-2 border-bottom">
                        <span class="text-muted">Límite Consumido:</span>
                        <span class="fw-bold text-warning"><t t-esc="env.utils.formatCurrency(props.data.consumed_limit)"/></span>
                    </div>
                    <div class="d-flex justify-content-between p-2 border-bottom">
                        <span class="text-muted">Monto a Consumir:</span>
                        <span class="fw-bold text-primary"><t t-esc="env.utils.formatCurrency(props.data.amount_total)"/></span>
                    </div>
                    <div class="d-flex justify-content-between p-2 border-bottom bg-light">
                        <span class="fw-bold">Límite Disponible:</span>
                        <span class="fw-bold text-success">
                            (<t t-esc="env.utils.formatCurrency(props.data.consumption_limit)"/> - <t t-esc="env.utils.formatCurrency(props.data.consumed_limit)"/>) = <t t-esc="env.utils.formatCurrency(props.data.available_previous)"/>
                        </span>
                    </div>

                    <!-- Separator/divider visual -->
                    <div class="p-1 bg-secondary opacity-25"></div>

                    <div class="d-flex justify-content-between p-2 border-bottom">
                        <span class="text-muted">Consumido Final (Proyectado):</span>
                        <span>
                            (<t t-esc="env.utils.formatCurrency(props.data.consumed_limit)"/> + <t t-esc="env.utils.formatCurrency(props.data.amount_total)"/>) = <strong class="text-warning"><t t-esc="env.utils.formatCurrency(props.data.consumed_final)"/></strong>
                        </span>
                    </div>
                    <div class="d-flex justify-content-between p-2 bg-danger-light" style="background-color: #ffebee;">
                        <span class="fw-bold text-danger">Disponible Final (Proyectado):</span>
                        <span class="fw-bold text-danger">
                             (<t t-esc="env.utils.formatCurrency(props.data.available_previous)"/> - <t t-esc="env.utils.formatCurrency(props.data.amount_total)"/>) = <t t-esc="env.utils.formatCurrency(props.data.available_final)"/>
                        </span>
                    </div>
                </div>

                <p class="mt-3 text-center text-muted small">
                    Por favor reduzca el monto de la orden o contacte a un administrador.
                </p>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="props.close">De acuerdo</button>
            </t>
        </Dialog>
    </t>

</templates>
